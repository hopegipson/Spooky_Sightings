<center>
<h1>Leaderboard: Where ghosts that are bad at hiding/sighted most</h1>
<% unless Ghost.all.empty? %>
  <ul class="list-group">
  <% @rankingshash = {} %>

   <% Ghost.all.each do |ghost| %>
    <% @rankingshash["#{ghost.name}"] = "#{ghost.users.length.to_i}" %>
   <br>
  <% end %> 
  <% @sortedhash = @rankingshash.sort_by {|k, v| v}.reverse %>
  <%= ranking = 0 %>

  <% @sortedhash.each do |key, value| %>
    <li class="list-group-item d-flex justify-content-between align-items-center">
    <% ghost = Ghost.all.find_by(name: key) %>
    <a href='/cities/<%= ghost.cities.first.id %>'><%= ghost.name %></a>
    <%= value %> ghosts sighted

    <span class="badge badge-primary badge-pill">ranking</span>
    <%= ranking += 1 %>

  </li>
   <br>
  <% end %> 

  </ul>

<% else %>
  <p>This site has no ghosts for the board yet!</p>
<% end %> 
</center> 